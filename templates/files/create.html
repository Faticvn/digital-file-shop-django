{% extends "base.html" %}
{% block content %}
<h2>ثبت فایل جدید (فروشنده)</h2>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {{ form.as_p }}

  <hr>
  <h3>جزئیات بر اساس نوع فایل</h3>

  <div id="articleFields" style="display:none;">
    <h4>مقاله</h4>
    {{ article_form.as_p }}
  </div>

  <div id="bookFields" style="display:none;">
    <h4>کتاب</h4>
    {{ book_form.as_p }}
  </div>

  <div id="musicFields" style="display:none;">
    <h4>موسیقی</h4>
    {{ music_form.as_p }}
  </div>

  <div id="imageFields" style="display:none;">
    <h4>تصویر</h4>
    {{ image_form.as_p }}
  </div>

  <button type="submit">ثبت</button>
</form>

<script>
  function toggleDetailForms() {
    const t = document.querySelector('select[name="type"]')?.value;
    document.getElementById('articleFields').style.display = (t === 'article') ? 'block' : 'none';
    document.getElementById('bookFields').style.display    = (t === 'book') ? 'block' : 'none';
    document.getElementById('musicFields').style.display   = (t === 'music') ? 'block' : 'none';
    document.getElementById('imageFields').style.display   = (t === 'image') ? 'block' : 'none';
  }
  document.addEventListener('DOMContentLoaded', () => {
    toggleDetailForms();
    const sel = document.querySelector('select[name="type"]');
    if (sel) sel.addEventListener('change', toggleDetailForms);
  });
</script>
{% endblock %}